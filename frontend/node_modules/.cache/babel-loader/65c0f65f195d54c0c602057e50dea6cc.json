{"ast":null,"code":"var _jsxFileName = \"/home/com115/Desktop/ppl/frontend/src/upload_post.js\";\nimport React, { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport Img from 'react-image'; // const Img = require('react-image');\n// import Logo from './posts/rsz_4.png'\n\nexport default function Upload(props) {\n  // constructor(props){\n  //     super(props);\n  //     this.state={\n  //         postname:\"\",\n  //         category:this.props.AllCategories[0].category,\n  //         file:\"\",\n  //         date:\"\",\n  //         time:\"\",\n  //         email:\"\",\n  //         username:\"\",\n  //         likes:0,\n  //         comments:0,\n  //         array:[]\n  //     }\n  //     console.log(\"user is !!!!!!!!!\",localStorage.username);\n  // console.log(\"user is !!!!!!!!!\",localStorage.email);\n  // // console.log(\"user is !!!!!!!!!\",localStorage.password);\n  // this.setState({email:localStorage.email});\n  // this.setState({username:localStorage.username});\n  // console.log(\"state issssssssssssswwwwwwwwwww\",this.state);\n  // }\n  const [postname, setPostname] = useState(\"\");\n  const [category, setCategory] = useState(props.AllCategories[0].category);\n  const [file, setFile] = useState(\"\");\n  const [date, setDate] = useState(\"\");\n  const [time, setTime] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [likes, setLikes] = useState(0);\n  const [comments, setComments] = useState(0);\n  useEffect(() => {\n    setEmail(localStorage.email);\n    setUsername(localStorage.username);\n  }, []); // handle = (event)=>{\n  //     //  this.setState({item:event.target.value});\n  //     console.log(\"value is +++++++\",event.target.value);\n  //    // console.log(\"item is +++++\",item);\n  //        var item =  this.state.array;\n  //        item.push(event.target.value);\n  //        this.setState({array:item})\n  //     console.log(this.state.array);\n  // }\n  // handleChange = (event) => {\n  //     let nam = event.target.name;\n  //     let val = event.target.value;\n  //     this.setState({ [nam]: val });\n  //     console.log(\"value is $$$$$$\",val);\n  //   };\n\n  const handleChangeFile = event => {\n    console.log(\"image is ++++++++++\", event.target.files[0]); // this.setState({\n    //     file:event.target.files[0]\n    // })\n\n    setFile(event.target.files[0]); // console.log(\"image is ------------\",this.state.file)\n\n    var dat = new Date(); //    this.setState({date: dat.toString().slice(8,10) + \" \" + dat.toString().slice(4,7) + \" \" + dat.toString().slice(11,15) })\n    //    this.setState({time:dat.toString().slice(16,24)});\n\n    setDate(dat.toString().slice(8, 10) + \" \" + dat.toString().slice(4, 7) + \" \" + dat.toString().slice(11, 15));\n    setTime(dat.toString().slice(16, 24)); //    this.setState({emailid:localStorage.email});\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    console.log(\"date isssssssssssssssss\", this.state);\n    var temp = this.state.array;\n    temp.push(this.state.file.name);\n    this.setState({\n      array: temp\n    });\n    console.log(\"Mail is ------- \", localStorage.email);\n    console.log(\"state ------- \", this.state);\n    const formData = new FormData();\n    formData.append(\"image\", this.state.file);\n    formData.append(\"category\", this.state.category);\n    formData.append(\"postname\", this.state.postname);\n    formData.append(\"date\", this.state.date);\n    formData.append(\"time\", this.state.time);\n    formData.append(\"email\", localStorage.email);\n    formData.append(\"username\", localStorage.username);\n    formData.append(\"likes\", this.state.likes);\n    formData.append(\"comments\", this.state.comments); //  console.log('form data---',formData);\n\n    const config = {\n      headers: {\n        \"content-type\": \"multipart/form-data\"\n      }\n    };\n    Axios.post(\"http://localhost:9000/post/upload\", formData, config).then(function (response) {\n      console.log(\"upload response++++++++\", response.data);\n    });\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, \"Upload post:\"), React.createElement(\"form\", {\n    onSubmit: this.handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, \"POST NAME:\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    name: \"postname\",\n    onChange: event => setPostname(event.target.value),\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }), \"CATEGORY:\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }), React.createElement(\"select\", {\n    name: \"category\",\n    onChange: event => setCategory(event.target.value),\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, this.props.AllCategories.map(item => {\n    return React.createElement(\"option\", {\n      value: item.category,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, item.category);\n  })), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }), \"image:\", React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"file\",\n    name: \"file\",\n    onChange: event => handleChangeFile(event),\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Post it\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  })));\n}\n{\n  /* <h1>hello</h1>\n  <input type=\"text\" name=\"array\" onChange={this.handle}/>\n  \n  <ol>\n     {\n         this.state.array.map(item=> <li>{item}</li>)\n     }\n  </ol> */\n}","map":{"version":3,"sources":["/home/com115/Desktop/ppl/frontend/src/upload_post.js"],"names":["React","useState","useEffect","Axios","Img","Upload","props","postname","setPostname","category","setCategory","AllCategories","file","setFile","date","setDate","time","setTime","email","setEmail","username","setUsername","likes","setLikes","comments","setComments","localStorage","handleChangeFile","event","console","log","target","files","dat","Date","toString","slice","handleSubmit","preventDefault","state","temp","array","push","name","setState","formData","FormData","append","config","headers","post","then","response","data","value","map","item"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport Img from 'react-image';\n// const Img = require('react-image');\n// import Logo from './posts/rsz_4.png'\n\nexport default function Upload (props){\n    // constructor(props){\n    //     super(props);\n\n    //     this.state={\n    //         postname:\"\",\n    //         category:this.props.AllCategories[0].category,\n    //         file:\"\",\n    //         date:\"\",\n    //         time:\"\",\n    //         email:\"\",\n    //         username:\"\",\n\n    //         likes:0,\n    //         comments:0,\n            \n    //         array:[]\n            \n            \n    //     }\n    //     console.log(\"user is !!!!!!!!!\",localStorage.username);\n    // console.log(\"user is !!!!!!!!!\",localStorage.email);\n    // // console.log(\"user is !!!!!!!!!\",localStorage.password);\n\n    // this.setState({email:localStorage.email});\n    // this.setState({username:localStorage.username});\n\n    // console.log(\"state issssssssssssswwwwwwwwwww\",this.state);\n    // }\n\n    const [postname,setPostname] = useState(\"\");\n    const [category,setCategory] = useState(props.AllCategories[0].category);\n    const [file,setFile] = useState(\"\");\n    const [date,setDate] = useState(\"\");\n    const [time,setTime] = useState(\"\");\n    const [email,setEmail] = useState(\"\");\n    const [username,setUsername] = useState(\"\");\n    const [likes,setLikes] = useState(0);\n    const [comments,setComments] = useState(0);\n\n    useEffect(()=>{\n        setEmail(localStorage.email);\n        setUsername(localStorage.username);\n    },[])\n\n    // handle = (event)=>{\n        \n\n    //     //  this.setState({item:event.target.value});\n\n    //     console.log(\"value is +++++++\",event.target.value);\n    //    // console.log(\"item is +++++\",item);\n\n      \n    //        var item =  this.state.array;\n    //        item.push(event.target.value);\n\n    //        this.setState({array:item})\n\n            \n\n    //     console.log(this.state.array);\n    // }\n\n    // handleChange = (event) => {\n    //     let nam = event.target.name;\n    //     let val = event.target.value;\n    //     this.setState({ [nam]: val });\n\n    //     console.log(\"value is $$$$$$\",val);\n    \n    //   };\n\n    const handleChangeFile = event =>{\n\n        console.log(\"image is ++++++++++\",event.target.files[0])\n\n        \n\n        // this.setState({\n        //     file:event.target.files[0]\n        // })\n\n        setFile(event.target.files[0]);\n\n        // console.log(\"image is ------------\",this.state.file)\n\n        var dat = new Date();\n\n    //    this.setState({date: dat.toString().slice(8,10) + \" \" + dat.toString().slice(4,7) + \" \" + dat.toString().slice(11,15) })\n    //    this.setState({time:dat.toString().slice(16,24)});\n\n       setDate( dat.toString().slice(8,10) + \" \" + dat.toString().slice(4,7) + \" \" + dat.toString().slice(11,15) );\n       setTime( dat.toString().slice(16,24) );\n\n    //    this.setState({emailid:localStorage.email});\n\n       \n\n       \n    }\n    \n      const handleSubmit = (event) => {\n    \n    \n        event.preventDefault();\n\n        console.log(\"date isssssssssssssssss\",this.state)\n\n        var temp = this.state.array;\n\n        temp.push(this.state.file.name);\n\n        this.setState({array:temp});\n\n        console.log(\"Mail is ------- \",localStorage.email);\n\n        console.log(\"state ------- \",this.state);\n\n\n\n        \n         const formData =  new FormData();\n         formData.append(\"image\",this.state.file)\n         formData.append(\"category\",this.state.category)\n         formData.append(\"postname\",this.state.postname)\n         formData.append(\"date\",this.state.date)\n         formData.append(\"time\",this.state.time)\n         formData.append(\"email\",localStorage.email)\n         formData.append(\"username\",localStorage.username)\n         formData.append(\"likes\",this.state.likes)\n         formData.append(\"comments\",this.state.comments)\n\n\n\n        //  console.log('form data---',formData);\n\n            const config = {\n                headers:{\n                    \"content-type\": \"multipart/form-data\"\n                }\n            }\n\n         Axios.post(\"http://localhost:9000/post/upload\", formData,config).then(function (response) {\n    \n           console.log(\"upload response++++++++\",response.data);\n          \n    \n         })\n\n         \n    \n      };\n\n        return(\n        <div>\n            <h1>Upload post:</h1>\n            <form onSubmit={this.handleSubmit}>\n                POST NAME:<br/>\n                <input type=\"text\" name=\"postname\" onChange={(event)=>setPostname(event.target.value)} required/><br/><br/>\n\n                CATEGORY:<br/>\n                <select name=\"category\" onChange={(event)=> setCategory(event.target.value)} required>\n                    {/* <option value=\"CATS\">CATS</option>\n                    <option value=\"DOGS\">DOGS</option>\n                    <option value=\"BIRDS\">BIRDS</option>\n                    <option value=\"RABBITS\">RABBITS</option>\n                    <option value=\"OTHERS\">OTHERS</option> */}\n\n                    {\n                        this.props.AllCategories.map((item)=>{\n                            return (<option value={item.category} >{item.category}</option>)\n                        })\n                    }\n                </select><br/><br/>\n\n                image:<br/>\n                <input type=\"file\" name=\"file\" onChange={(event)=>handleChangeFile(event)} required/><br/><br/>\n\n                <input type=\"submit\" value=\"Post it\"/>\n            </form>\n            \n        </div>  \n        )\n    \n}\n\n{/* <h1>hello</h1>\n\n<input type=\"text\" name=\"array\" onChange={this.handle}/>\n\n\n\n<ol>\n    {\n        this.state.array.map(item=> <li>{item}</li>)\n    }\n</ol> */}"]},"metadata":{},"sourceType":"module"}